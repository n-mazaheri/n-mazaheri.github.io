"use strict";(self.webpackChunkimage_editor=self.webpackChunkimage_editor||[]).push([[92362],{92362:(a,t,n)=>{n.d(t,{relayBiconomyTransaction:()=>l});var e=n(93110),o=n(70049),s=n(1578),i=n(65289),r=n(80929),c=n(49343),d=n(60301);const h=0n;async function l(a){const[t,n]=await async function(a){var t;let{account:n,serializableTransaction:i,transaction:c,gasless:l}=a;const u=(0,s.P)({address:l.relayerForwarderAddress,chain:c.chain,client:c.client}),w=await(0,d.readContract)({contract:u,method:"function getNonce(address,uint256) view returns (uint256)",params:[n.address,h]}),p=Math.floor(Date.now()/1e3)+(null!==(t=l.deadlineSeconds)&&void 0!==t?t:3600),y={from:n.address,to:i.to,token:o.Y4,txGas:i.gas,tokenGasPrice:0n,batchId:h,batchNonce:w,deadline:p,data:i.data};if(!y.to)throw new Error("Cannot send a transaction without a `to` address");if(!y.txGas)throw new Error("Cannot send a transaction without a `gas` value");if(!y.data)throw new Error("Cannot send a transaction without a `data` value");const f=(0,e.h)([{type:"address"},{type:"address"},{type:"address"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[y.from,y.to,y.token,y.txGas,y.tokenGasPrice,y.batchId,y.batchNonce,(0,r.S)(y.data)]);return[y,await n.signMessage({message:f})]}(a),l=await fetch("https://api.biconomy.io/api/v2/meta-tx/native",{method:"POST",body:(0,c.A)({apiId:a.gasless.apiId,params:[t,n],from:t.from,to:t.to,gasLimit:t.txGas}),headers:{"x-api-key":a.gasless.apiKey,"Content-Type":"application/json;charset=utf-8"}});var u;if(!l.ok)throw null===(u=l.body)||void 0===u||u.cancel(),new Error("Failed to send transaction: ".concat(await l.text()));const w=await l.json(),p=w.txHash;if((0,i.q)(p))return{transactionHash:p,chain:a.transaction.chain,client:a.transaction.client};throw new Error("Failed to send transaction: ".concat((0,c.A)(w)))}}}]);
//# sourceMappingURL=92362.70e2eb4e.chunk.js.map