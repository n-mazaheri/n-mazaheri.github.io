"use strict";(self.webpackChunkimage_editor=self.webpackChunkimage_editor||[]).push([[71271],{71271:(e,n,a)=>{a.d(n,{autoConnectInjectedWallet:()=>m,connectInjectedWallet:()=>l});var t=a(4484),r=a(54235),o=a(69737),i=a(40886),s=a(16940),c=a(22319),d=a(21529),u=a(11302);function h(e){const n=(0,d.injectedProvider)(e);if(!n)throw new Error('No injected provider found for wallet: "'.concat(e,'"'));return n}async function l(e,n,a){const t=h(e),i=(await t.request({method:"eth_requestAccounts"}))[0];if(!i)throw new Error("no accounts available");const s=(0,o.bv)(i),d=await t.request({method:"eth_chainId"}).then(c.A);let u=n.chain&&n.chain.id===d?n.chain:(0,r.Q4)(d);return n.chain&&n.chain.id!==d&&(await p(t,n.chain),u=n.chain),w(t,s,u,a)}async function m(e,n,a){const t=h(e),i=(await t.request({method:"eth_accounts"}))[0];if(!i)throw new Error("no accounts available");const s=(0,o.bv)(i),d=await t.request({method:"eth_chainId"}).then(c.A);return w(t,s,a&&a.id===d?a:(0,r.Q4)(d),n)}function v(e,n){const a={address:n,async sendTransaction(n){return{transactionHash:await e.request({method:"eth_sendTransaction",params:[{accessList:n.accessList,value:n.value?(0,i.cK)(n.value):void 0,gas:n.gas?(0,i.cK)(n.gas):void 0,from:this.address,to:n.to,data:n.data}]})}},async signMessage(n){let{message:t}=n;if(!a.address)throw new Error("Provider not setup");const r="string"===typeof t?(0,i.i3)(t):t.raw instanceof Uint8Array?(0,i.EY)(t.raw):t.raw;return await e.request({method:"personal_sign",params:[r,a.address]})},async signTypedData(n){if(!e||!a.address)throw new Error("Provider not setup");const r=(0,u.y)(n),{domain:o,message:i,primaryType:s}=r,c={EIP712Domain:(0,t.H4)({domain:o}),...r.types};(0,t.$$)({domain:o,message:i,primaryType:s,types:c});const d=(0,t.v8)({domain:null!==o&&void 0!==o?o:{},message:i,primaryType:s,types:c});return await e.request({method:"eth_signTypedData_v4",params:[a.address,d]})}};return a}async function w(e,n,a,t){const i=v(e,n);async function s(){e.removeListener("accountsChanged",u),e.removeListener("chainChanged",h),e.removeListener("disconnect",d)}function d(){s(),t.emit("disconnect",void 0)}function u(n){if(n[0]){const a=v(e,(0,o.bv)(n[0]));t.emit("accountChanged",a),t.emit("accountsChanged",n)}else d()}function h(e){const n=(0,r.Q4)((0,c.A)(e));t.emit("chainChanged",n)}return e.on&&(e.on("accountsChanged",u),e.on("chainChanged",h),e.on("disconnect",d)),[i,a,s,n=>p(e,n)]}async function p(e,n){const a=(0,i.cK)(n.id);try{await e.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]})}catch(c){var t;if(4902!==(null===c||void 0===c?void 0:c.code)&&4902!==(null===c||void 0===c||null===(t=c.data)||void 0===t||null===(t=t.originalError)||void 0===t?void 0:t.code))throw c;{var o;const t=await(0,r.PB)(n);await e.request({method:"wallet_addEthereumChain",params:[{chainId:a,chainName:t.name,nativeCurrency:t.nativeCurrency,rpcUrls:(0,s.k)(t),blockExplorerUrls:null===(o=t.explorers)||void 0===o?void 0:o.map((e=>e.url))}]})}}}}}]);
//# sourceMappingURL=71271.c9690b51.chunk.js.map