"use strict";(self.webpackChunkimage_editor=self.webpackChunkimage_editor||[]).push([[98379,49766],{98379:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});var r=n(36663),o=n(47523),i=n(20052),l=n(63617),a=n(46933),c=n(16911),s=n(14844),u=n(49766),d=n(60033),p=n(46104),h=n(99075),x=n(37169);const m=(0,x.jx)({animation:"".concat(h.I0," 0.15s ease-in")});var g=n(46420),f=n(32094),j=Object.defineProperty,y=Object.defineProperties,v=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,C=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E="^\\d+$";var S="".concat(40,"px"),M=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");var P=c.createContext({}),L=c.forwardRef(((e,t)=>{var n,r,o,i,l,a=e,{value:s,onChange:u,maxLength:d,textAlign:p="left",pattern:h=E,inputMode:x="numeric",onComplete:m,pushPasswordManagerStrategy:g="increase-width",containerClassName:f,noScriptCSSFallback:j=I,render:L,children:T}=a,W=((e,t)=>{var n={};for(var r in e)k.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&w)for(var r of w(e))t.indexOf(r)<0&&b.call(e,r)&&(n[r]=e[r]);return n})(a,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","pushPasswordManagerStrategy","containerClassName","noScriptCSSFallback","render","children"]);let[R,D]=c.useState("string"==typeof W.defaultValue?W.defaultValue:""),B=null!=s?s:R,O=function(e){let t=c.useRef();return c.useEffect((()=>{t.current=e})),t.current}(B),z=c.useCallback((e=>{null==u||u(e),D(e)}),[u]),_=c.useMemo((()=>h?"string"==typeof h?new RegExp(h):h:null),[h]),F=c.useRef(null),N=c.useRef(null),H=c.useRef({value:B,onChange:z,isIOS:"undefined"!=typeof window&&(null==(r=null==(n=null==window?void 0:window.CSS)?void 0:n.supports)?void 0:r.call(n,"-webkit-touch-callout","none"))}),U=c.useRef({prev:[null==(o=F.current)?void 0:o.selectionStart,null==(i=F.current)?void 0:i.selectionEnd,null==(l=F.current)?void 0:l.selectionDirection]});c.useImperativeHandle(t,(()=>F.current),[]),c.useEffect((()=>{let e=F.current,t=N.current;if(!e||!t)return;function n(){if(document.activeElement!==e)return K(null),void J(null);let t,n=e.selectionStart,r=e.selectionEnd,o=e.selectionDirection,i=e.maxLength,l=e.value,a=U.current.prev,c=-1,s=-1;if(0!==l.length&&null!==n&&null!==r){let e=n===r,o=n===l.length&&l.length<i;if(e&&!o){let e=n;if(0===e)c=0,s=1,t="forward";else if(e===i)c=e-1,s=e,t="backward";else if(i>1&&l.length>1){let n=0;if(null!==a[0]&&null!==a[1]){t=e<a[1]?"backward":"forward";let r=a[0]===a[1]&&a[0]<i;"backward"===t&&!r&&(n=-1)}c=n+e,s=n+e+1}}-1!==c&&-1!==s&&c!==s&&F.current.setSelectionRange(c,s,t)}let u=-1!==c?c:n,d=-1!==s?s:r,p=null!=t?t:o;K(u),J(d),U.current.prev=[u,d,p]}if(H.current.value!==e.value&&H.current.onChange(e.value),U.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection],document.addEventListener("selectionchange",n,{capture:!0}),n(),document.activeElement===e&&V(!0),!document.getElementById("input-otp-style")){let e=document.createElement("style");if(e.id="input-otp-style",document.head.appendChild(e),e.sheet){let t="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";A(e.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),A(e.sheet,"[data-input-otp]:autofill { ".concat(t," }")),A(e.sheet,"[data-input-otp]:-webkit-autofill { ".concat(t," }")),A(e.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),A(e.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let r=()=>{t&&t.style.setProperty("--root-height","".concat(e.clientHeight,"px"))};r();let o=new ResizeObserver(r);return o.observe(e),()=>{document.removeEventListener("selectionchange",n,{capture:!0}),o.disconnect()}}),[]);let[Q,$]=c.useState(!1),[G,V]=c.useState(!1),[q,K]=c.useState(null),[Y,J]=c.useState(null);c.useEffect((()=>{!function(e){setTimeout(e,0),setTimeout(e,10),setTimeout(e,50)}((()=>{var e,t,n,r;null==(e=F.current)||e.dispatchEvent(new Event("input"));let o=null==(t=F.current)?void 0:t.selectionStart,i=null==(n=F.current)?void 0:n.selectionEnd,l=null==(r=F.current)?void 0:r.selectionDirection;null!==o&&null!==i&&(K(o),J(i),U.current.prev=[o,i,l])}))}),[B,G]),c.useEffect((()=>{void 0!==O&&B!==O&&O.length<d&&B.length===d&&(null==m||m(B))}),[d,m,O,B]);let Z=function(e){let{containerRef:t,inputRef:n,pushPasswordManagerStrategy:r,isFocused:o}=e,i=c.useRef({done:!1,refocused:!1}),[l,a]=c.useState(!1),[s,u]=c.useState(!1),[d,p]=c.useState(!1),h=c.useMemo((()=>"none"!==r&&("increase-width"===r||"experimental-no-flickering"===r)&&l&&s),[l,s,r]),x=c.useCallback((()=>{let e=t.current,o=n.current;if(!e||!o||d||"none"===r)return;let l=e,c=l.getBoundingClientRect().left+l.offsetWidth-18,s=l.getBoundingClientRect().top+l.offsetHeight/2;if((0!==document.querySelectorAll(M).length||document.elementFromPoint(c,s)!==e)&&(a(!0),p(!0),!i.current.refocused&&document.activeElement===o)){let e=[o.selectionStart,o.selectionEnd];o.blur(),o.focus(),o.setSelectionRange(e[0],e[1]),i.current.refocused=!0}}),[t,n,d,r]);return c.useEffect((()=>{let e=t.current;if(!e||"none"===r)return;function n(){let t=window.innerWidth-e.getBoundingClientRect().right;u(t>=40)}n();let o=setInterval(n,1e3);return()=>{clearInterval(o)}}),[t,r]),c.useEffect((()=>{let e=o||document.activeElement===n.current;if("none"===r||!e)return;let t=setTimeout(x,0),i=setTimeout(x,2e3),l=setTimeout(x,5e3),a=setTimeout((()=>{p(!0)}),6e3);return()=>{clearTimeout(t),clearTimeout(i),clearTimeout(l),clearTimeout(a)}}),[n,o,r,x]),{hasPWMBadge:l,willPushPWMBadge:h,PWM_BADGE_SPACE_WIDTH:S}}({containerRef:N,inputRef:F,pushPasswordManagerStrategy:g,isFocused:G}),X=c.useCallback((e=>{let t=e.currentTarget.value.slice(0,d);t.length>0&&_&&!_.test(t)?e.preventDefault():("string"==typeof O&&t.length<O.length&&document.dispatchEvent(new Event("selectionchange")),z(t))}),[d,z,O,_]),ee=c.useCallback((()=>{var e;if(F.current){let t=Math.min(F.current.value.length,d-1),n=F.current.value.length;null==(e=F.current)||e.setSelectionRange(t,n),K(t),J(n)}V(!0)}),[d]),te=c.useCallback((e=>{var t,n;let r=F.current;if(!H.current.isIOS||!e.clipboardData||!r)return;let o=e.clipboardData.getData("text/plain");e.preventDefault();let i=null==(t=F.current)?void 0:t.selectionStart,l=null==(n=F.current)?void 0:n.selectionEnd,a=(i!==l?B.slice(0,i)+o+B.slice(l):B.slice(0,i)+o+B.slice(i)).slice(0,d);if(a.length>0&&_&&!_.test(a))return;r.value=a,z(a);let c=Math.min(a.length,d-1),s=a.length;r.setSelectionRange(c,s),K(c),J(s)}),[d,z,_,B]),ne=c.useMemo((()=>({position:"relative",cursor:W.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"})),[W.disabled]),re=c.useMemo((()=>({position:"absolute",inset:0,width:Z.willPushPWMBadge?"calc(100% + ".concat(Z.PWM_BADGE_SPACE_WIDTH,")"):"100%",clipPath:Z.willPushPWMBadge?"inset(0 ".concat(Z.PWM_BADGE_SPACE_WIDTH," 0 0)"):void 0,height:"100%",display:"flex",textAlign:p,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"})),[Z.PWM_BADGE_SPACE_WIDTH,Z.willPushPWMBadge,p]),oe=c.useMemo((()=>c.createElement("input",((e,t)=>y(e,v(t)))(((e,t)=>{for(var n in t||(t={}))k.call(t,n)&&C(e,n,t[n]);if(w)for(var n of w(t))b.call(t,n)&&C(e,n,t[n]);return e})({autoComplete:W.autoComplete||"one-time-code"},W),{"data-input-otp":!0,"data-input-otp-mss":q,"data-input-otp-mse":Y,inputMode:x,pattern:null==_?void 0:_.source,style:re,maxLength:d,value:B,ref:F,onPaste:e=>{var t;te(e),null==(t=W.onPaste)||t.call(W,e)},onChange:X,onMouseOver:e=>{var t;$(!0),null==(t=W.onMouseOver)||t.call(W,e)},onMouseLeave:e=>{var t;$(!1),null==(t=W.onMouseLeave)||t.call(W,e)},onFocus:e=>{var t;ee(),null==(t=W.onFocus)||t.call(W,e)},onBlur:e=>{var t;V(!1),null==(t=W.onBlur)||t.call(W,e)}}))),[X,ee,te,x,re,d,Y,q,W,null==_?void 0:_.source,B]),ie=c.useMemo((()=>({slots:Array.from({length:d}).map(((e,t)=>{let n=G&&null!==q&&null!==Y&&(q===Y&&t===q||t>=q&&t<Y),r=void 0!==B[t]?B[t]:null;return{char:r,isActive:n,hasFakeCaret:n&&null===r}})),isFocused:G,isHovering:!W.disabled&&Q})),[G,Q,d,Y,q,W.disabled,B]),le=c.useMemo((()=>L?L(ie):c.createElement(P.Provider,{value:ie},T)),[T,ie,L]);return c.createElement(c.Fragment,null,null!==j&&c.createElement("noscript",null,c.createElement("style",null,j)),c.createElement("div",{ref:N,"data-input-otp-container":!0,style:ne,className:f},le,c.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},oe)))}));function A(e,t){try{e.insertRule(t)}catch(n){console.error("input-otp could not insert CSS rule:",t)}}L.displayName="Input";var T,I="\n[data-input-otp] {\n  --nojs-bg: white !important;\n  --nojs-fg: black !important;\n\n  background-color: var(--nojs-bg) !important;\n  color: var(--nojs-fg) !important;\n  caret-color: var(--nojs-fg) !important;\n  letter-spacing: .25em !important;\n  text-align: center !important;\n  border: 1px solid var(--nojs-fg) !important;\n  border-radius: 4px !important;\n  width: 100% !important;\n}\n@media (prefers-color-scheme: dark) {\n  [data-input-otp] {\n    --nojs-bg: black !important;\n    --nojs-fg: white !important;\n  }\n}",W=n(58008);function R(e){return(0,r.jsx)(D,{children:(0,r.jsx)(L,{onComplete:()=>{e.onEnter()},maxLength:6,value:e.value,render:t=>{let{slots:n}=t;return(0,r.jsx)(W.mc,{flex:"row",gap:"xs",center:"both",children:n.map(((t,n)=>(0,r.jsx)(B,{...t,isInvalid:e.isInvalid},n)))})},onChange:t=>{e.setValue(t)}})})}const D=(0,x.jx)({"& input":{maxWidth:"100%"}});function B(e){return(0,r.jsxs)(_,{"data-active":e.isActive,"data-error":e.isInvalid,children:[null!==e.char&&(0,r.jsx)("div",{children:e.char}),e.hasFakeCaret&&(0,r.jsx)(z,{})]})}const O=(0,f.i7)(T||(T=(0,g.A)(["\n  0%, 100% {\n    opacity: 0;\n  },\n  50% {\n    opacity: 1;\n  }\n  "]))),z=(0,x.jx)((()=>{const e=(0,d.QP)();return{position:"absolute",pointerEvents:"none",inset:0,display:"flex",alignItems:"center",justifyContent:"center",animation:"".concat(O," 1s infinite"),"&::before":{content:"''",display:"block",width:"1.5px",height:"1em",backgroundColor:e.colors.primaryText}}})),_=(0,x.jx)((()=>{const e=(0,d.QP)();return{position:"relative",width:"40px",height:"40px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",fontSize:p.J.md,padding:p.YK.xs,boxSizing:"border-box",transition:"color 200ms ease",border:"2px solid ".concat(e.colors.borderColor),"&[data-active='true']":{borderColor:e.colors.accentText},color:e.colors.primaryText,borderRadius:p.r8.lg,"&[data-error='true']":{borderColor:e.colors.danger}}}));var F=n(23700),N=n(12167),H=n(6287),U=n(56043),Q=n(61240);function $(e){const{wallet:t,done:n,goBack:i,userInfo:l}=e,{client:a,chain:d,connectModal:p}=(0,o.c)(),h="wide"===p.size,x=e.locale,[g,f]=(0,c.useState)(""),[j,y]=(0,c.useState)("idle"),[v,w]=(0,c.useState)("sending"),[k]=(0,c.useState)("base"),b=(0,c.useCallback)((async()=>{f(""),y("idle"),w("sending");try{if("email"in l){const e=await(0,u.je)({email:l.email,strategy:"email",client:a});w(e)}else{if(!("phone"in l))throw new Error("Invalid userInfo");{const e=await(0,u.je)({phoneNumber:l.phone,strategy:"phone",client:a});w(e)}}}catch(e){console.error(e),y("idle"),w("error")}}),[a,l]);async function C(e){if("email"in l)await t.connect({chain:d,strategy:"email",email:l.email,verificationCode:e,client:a}),await(0,Q.O)("email",s.n);else{if(!("phone"in l))throw new Error("Invalid userInfo");await t.connect({chain:d,strategy:"phone",phoneNumber:l.phone,verificationCode:e,client:a}),await(0,Q.O)("phone",s.n)}}const E=async e=>{if("object"===typeof v&&6===e.length&&(y("idle"),"object"===typeof v&&t))try{y("verifying");if("USER_MANAGED"===v.recoveryShareManagement&&(v.isNewUser||v.isNewDevice))if(v.isNewUser)try{await C(e)}catch(o){if(!(o instanceof Error&&o.message.includes("encryption key")))throw o}else try{await C(e)}catch(o){if(!(o instanceof Error&&o.message.includes("encryption key")))throw o}else await C(e),n();y("valid")}catch(o){var r;o instanceof Error&&null!==o&&void 0!==o&&null!==(r=o.message)&&void 0!==r&&r.includes("PAYMENT_METHOD_REQUIRED")?y("payment_required"):y("invalid"),console.error("Authentication Error",o)}},S=(0,c.useRef)(!1);return(0,c.useEffect)((()=>{S.current||(S.current=!0,b())}),[b]),"base"===k?(0,r.jsxs)(W.mc,{fullHeight:!0,flex:"column",animate:"fadein",children:[(0,r.jsx)(W.mc,{p:"lg",children:(0,r.jsx)(W.rQ,{title:x.signIn,onBack:i})}),(0,r.jsx)(W.mc,{expand:!0,flex:"column",center:"y",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault()},children:[(0,r.jsxs)(W.mc,{flex:"column",center:"x",px:"lg",children:[!h&&(0,r.jsx)(F.h,{y:"xl"}),(0,r.jsx)(U.E,{children:x.emailLoginScreen.enterCodeSendTo}),(0,r.jsx)(F.h,{y:"sm"}),(0,r.jsx)(U.E,{color:"primaryText",children:"email"in l?l.email:l.phone}),(0,r.jsx)(F.h,{y:"xl"})]}),(0,r.jsx)(R,{isInvalid:"invalid"===j,digits:6,value:g,setValue:e=>{f(e),y("idle")},onEnter:()=>{E(g)}}),"invalid"===j&&(0,r.jsxs)(m,{children:[(0,r.jsx)(F.h,{y:"md"}),(0,r.jsx)(U.E,{size:"sm",color:"danger",center:!0,children:x.emailLoginScreen.invalidCode})]}),"payment_required"===j&&(0,r.jsxs)(m,{children:[(0,r.jsx)(F.h,{y:"md"}),(0,r.jsx)(U.E,{size:"sm",color:"danger",center:!0,children:x.maxAccountsExceeded})]}),(0,r.jsx)(F.h,{y:"xl"}),(0,r.jsx)(W.mc,{px:h?"xxl":"lg",children:"verifying"===j?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(W.mc,{flex:"row",center:"x",animate:"fadein",children:(0,r.jsx)(N.y,{size:"lg",color:"accentText"})})}):(0,r.jsx)(W.mc,{animate:"fadein",children:(0,r.jsx)(H.$n,{onClick:()=>E(g),variant:"accent",type:"submit",style:{width:"100%"},children:x.emailLoginScreen.verify})},"btn-container")}),(0,r.jsx)(F.h,{y:"xl"}),!h&&(0,r.jsx)(W.N1,{}),(0,r.jsxs)(W.mc,{p:h?void 0:"lg",children:["error"===v&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(U.E,{size:"sm",center:!0,color:"danger",children:x.emailLoginScreen.failedToSendCode})}),"sending"===v&&(0,r.jsxs)(W.mc,{flex:"row",center:"both",gap:"xs",style:{textAlign:"center"},children:[(0,r.jsx)(U.E,{size:"sm",children:x.emailLoginScreen.sendingCode}),(0,r.jsx)(N.y,{size:"xs",color:"secondaryText"})]}),"object"===typeof v&&(0,r.jsx)(G,{onClick:b,type:"button",children:x.emailLoginScreen.resendCode})]})]})})]}):null}const G=(0,x.OV)((()=>{const e=(0,d.QP)();return{all:"unset",color:e.colors.accentText,fontSize:p.J.sm,cursor:"pointer",textAlign:"center",fontWeight:500,width:"100%","&:hover":{color:e.colors.primaryText}}}));var V=n(99310),q=n(60341);const K=e=>(0,r.jsxs)("svg",{width:e.size,height:e.size,viewBox:"0 0 36 36",fill:"none","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M18.0001 15C17.2045 15 16.4414 15.3161 15.8788 15.8787C15.3162 16.4413 15.0001 17.2044 15.0001 18C15.0001 19.53 14.8501 21.765 14.6101 24",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M21.0002 19.6801C21.0002 23.2501 21.0002 29.2501 19.5002 33.0001",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M25.9348 31.53C26.1148 30.63 26.5798 28.08 26.6848 27",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M2.99976 18C2.99976 14.8518 3.99032 11.7833 5.83112 9.22935C7.67193 6.67536 10.2697 4.76531 13.2563 3.76975C16.243 2.77419 19.4672 2.74359 22.4723 3.6823C25.4773 4.621 28.1108 6.48141 29.9998 9",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M2.99976 24H3.01628",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M32.7 24C33 21 32.8965 15.969 32.7 15",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M7.49976 29.25C8.24976 27 8.99976 22.5 8.99976 18C8.99824 16.9783 9.17071 15.9638 9.50976 15",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M12.9751 33C13.2901 32.01 13.6501 31.02 13.8301 30",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M13.5 10.2C14.8686 9.40988 16.4211 8.99401 18.0014 8.99426C19.5818 8.99452 21.1342 9.41088 22.5025 10.2015C23.8708 10.9921 25.0069 12.129 25.7964 13.498C26.5859 14.867 27.001 16.4197 27 18V21",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]});function Y(e){const{client:t,connectModal:n,chain:i}=(0,o.c)(),{wallet:a,done:s}=e,[u,d]=(0,c.useState)("loading"),p=(0,c.useRef)(!1);return(0,c.useEffect)((()=>{p.current||(p.current=!0,(0,V.A1)(t).then((e=>{d(e?"login":"select")})).catch((()=>{d("select")})))}),[t]),(0,r.jsxs)(W.mc,{animate:"fadein",fullHeight:!0,flex:"column",children:[(0,r.jsx)(W.mc,{p:"lg",children:(0,r.jsx)(W.rQ,{title:"Passkey",onBack:e.onBack})}),(0,r.jsx)(W.mc,{px:"wide"===n.size?"xxl":"lg",expand:!0,flex:"column",center:"y",children:(0,r.jsxs)("div",{children:["loading"===u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.x,{}),(0,r.jsx)(F.h,{y:"xxl"})]}),"select"===u&&(0,r.jsx)(X,{onSignin:()=>{d("login")},onSignup:()=>{d("signup")}}),"login"===u&&(0,r.jsx)(J,{wallet:a,client:t,done:s,onCreate:()=>{d("signup")},chain:i}),"signup"===u&&(0,r.jsx)(Z,{wallet:a,client:t,done:s,chain:i})]})})]})}function J(e){const{wallet:t,done:n,client:o,chain:i}=e,[l,a]=(0,c.useState)("loading");async function u(){a("loading");try{await t.connect({client:o,strategy:"passkey",type:"sign-in",chain:i}),await(0,Q.O)("passkey",s.n),n()}catch{a("error")}}const d=(0,c.useRef)(!1);return(0,c.useEffect)((()=>{d.current||(d.current=!0,u())})),"loading"===l?(0,r.jsx)(te,{title:"Requesting Passkey",subtitle:"A pop-up prompt will appear to sign-in and verify your passkey"}):"error"===l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee,{onTryAgain:u,title:"Failed to Login"}),(0,r.jsx)(F.h,{y:"sm"}),(0,r.jsx)(H.$n,{variant:"outline",fullWidth:!0,onClick:e.onCreate,children:"Create a new Passkey"}),(0,r.jsx)(F.h,{y:"lg"})]}):null}function Z(e){const{wallet:t,done:n,client:o,chain:i}=e,[l,a]=(0,c.useState)("loading");async function u(){a("loading");try{await t.connect({client:o,strategy:"passkey",type:"sign-up",chain:i}),await(0,Q.O)("passkey",s.n),n()}catch{a("error")}}const d=(0,c.useRef)(!1);return(0,c.useEffect)((()=>{d.current||(d.current=!0,u())})),"loading"===l?(0,r.jsx)(te,{title:"Creating Passkey",subtitle:"A pop-up prompt will appear to sign-in and verify your passkey"}):"error"===l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee,{onTryAgain:u,title:"Failed to create passkey"}),(0,r.jsx)(F.h,{y:"lg"})]}):null}function X(e){return(0,r.jsxs)(W.mc,{children:[(0,r.jsx)(F.h,{y:"xxl"}),(0,r.jsx)(W.mc,{flex:"row",center:"x",color:"accentText",children:(0,r.jsx)(K,{size:p.RK["4xl"]})}),(0,r.jsx)(F.h,{y:"xl"}),(0,r.jsx)(F.h,{y:"xxl"}),(0,r.jsx)(H.$n,{variant:"accent",onClick:e.onSignup,fullWidth:!0,children:"Create a Passkey"}),(0,r.jsx)(F.h,{y:"sm"}),(0,r.jsx)(H.$n,{variant:"outline",onClick:e.onSignin,fullWidth:!0,children:"I have a Passkey"}),(0,r.jsx)(F.h,{y:"lg"})]})}function ee(e){return(0,r.jsxs)(W.mc,{animate:"fadein",children:[(0,r.jsx)(F.h,{y:"xxl"}),(0,r.jsx)(W.mc,{flex:"row",center:"x",children:(0,r.jsx)(q.g,{size:p.RK["3xl"]})}),(0,r.jsx)(F.h,{y:"lg"}),(0,r.jsx)(U.E,{center:!0,color:"primaryText",size:"lg",children:e.title}),(0,r.jsx)(F.h,{y:"xl"}),(0,r.jsx)(F.h,{y:"xxl"}),(0,r.jsx)(H.$n,{variant:"accent",fullWidth:!0,onClick:e.onTryAgain,children:"Try Again"})]})}function te(e){return(0,r.jsxs)(W.mc,{animate:"fadein",children:[(0,r.jsx)(F.h,{y:"xxl"}),(0,r.jsxs)(W.mc,{flex:"row",center:"x",style:{position:"relative"},children:[(0,r.jsx)(N.y,{size:"4xl",color:"accentText"}),(0,r.jsx)(W.mc,{color:"accentText",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,r.jsx)(K,{size:p.RK.xxl})})]}),(0,r.jsx)(F.h,{y:"xl"}),(0,r.jsx)(U.E,{center:!0,color:"primaryText",size:"lg",children:e.title}),(0,r.jsx)(F.h,{y:"md"}),(0,r.jsx)(U.E,{multiline:!0,center:!0,children:e.subtitle}),(0,r.jsx)(F.h,{y:"xxl"}),(0,r.jsx)(F.h,{y:"xxl"})]})}var ne=n(88392);function re(e){var t;const n=e.locale,i=n.socialLoginScreen,l=(0,d.QP)(),{connectModal:a}=(0,o.c)(),[u,p]=(0,c.useState)(void 0),{done:h,wallet:x}=e,[m,g]=(0,c.useState)("connecting"),{client:f,chain:j}=(0,o.c)(),y=null===(t=e.state)||void 0===t?void 0:t.socialLogin,v=(0,c.useRef)(!1);return(0,c.useEffect)((()=>{v.current||y&&(v.current=!0,g("connecting"),y.connectionPromise.then((()=>{h(),g("connected")})).catch((()=>{g("error")})))}),[h,y]),(0,r.jsx)(W.mc,{animate:"fadein",flex:"column",fullHeight:!0,children:(0,r.jsxs)(W.mc,{flex:"column",expand:!0,p:"lg",style:{paddingBottom:0},children:[e.goBack&&(0,r.jsx)(W.rQ,{title:i.title,onBack:e.goBack}),"compact"===a.size?(0,r.jsx)(F.h,{y:"xl"}):null,(0,r.jsxs)(W.mc,{flex:"column",center:"both",expand:!0,style:{textAlign:"center",minHeight:"250px"},children:["error"!==m&&(0,r.jsxs)(W.mc,{animate:"fadein",children:[(0,r.jsx)(U.E,{color:"primaryText",center:!0,multiline:!0,style:{maxWidth:"250px"},children:i.instruction}),(0,r.jsx)(F.h,{y:"xl"}),(0,r.jsx)(W.mc,{center:"x",flex:"row",children:(0,r.jsx)(N.y,{size:"lg",color:"accentText"})}),(0,r.jsx)(F.h,{y:"xxl"})]}),"error"===m&&(0,r.jsxs)(W.mc,{animate:"fadein",children:[(0,r.jsx)(U.E,{color:"danger",children:i.failed}),u&&(0,r.jsx)(U.E,{color:"danger",children:u}),(0,r.jsx)(F.h,{y:"lg"}),(0,r.jsx)(H.$n,{variant:"primary",onClick:async()=>{try{const t=(0,ne.C)(e.socialAuth,l);if(!t)throw new Error("Failed to open ".concat(e.socialAuth," login window"));g("connecting"),await x.connect({chain:j,strategy:e.socialAuth,openedWindow:t,closeOpenedWindow:e=>{e.close()},client:f}),await(0,Q.O)(e.socialAuth,s.n),g("connected"),h()}catch(r){var t;g("error"),r instanceof Error&&null!==r&&void 0!==r&&null!==(t=r.message)&&void 0!==t&&t.includes("PAYMENT_METHOD_REQUIRED")&&p(n.maxAccountsExceeded),console.error("Error sign in with ".concat(e.socialAuth),r)}},children:i.retry}),(0,r.jsx)(F.h,{y:"xxl"})]})]})]})})}var oe=n(39415);const ie=function(e){const t=(0,i.Cl)(),n=(0,i.IU)(),c=t,s=(0,oe.H)(),{connectModal:u}=(0,o.c)();if(!s.data)return(0,r.jsx)(l.x,{});const d="compact"===u.size?e.goBack:()=>{n({})},p=null!==c&&void 0!==c&&c.emailLogin?{email:c.emailLogin}:null!==c&&void 0!==c&&c.phoneLogin?{phone:c.phoneLogin}:void 0;return p?(0,r.jsx)($,{userInfo:p,locale:s.data,done:e.done,goBack:d,wallet:e.wallet}):null!==c&&void 0!==c&&c.passkeyLogin?(0,r.jsx)(Y,{wallet:e.wallet,done:e.done,onBack:d}):null!==c&&void 0!==c&&c.socialLogin?(0,r.jsx)(re,{socialAuth:c.socialLogin.type,locale:s.data,done:e.done,goBack:d,wallet:e.wallet,state:c}):(0,r.jsx)(a.w,{select:()=>{},locale:s.data,done:e.done,goBack:e.goBack,wallet:e.wallet})}},49766:(e,t,n)=>{n.d(t,{getUserEmail:()=>a,getUserPhoneNumber:()=>c,je:()=>s});var r=n(76101),o=n(99671);async function i(e){return(0,o.getOrCreateInAppWalletConnector)(e,(async e=>{const{InAppWebConnector:t}=await Promise.all([n.e(99310),n.e(17298)]).then(n.bind(n,17298));return new t({client:e})}))}async function l(e){const{client:t}=e,n=await i(t),o=await n.getUser();if(o.status===r.P1.LOGGED_IN_WALLET_INITIALIZED)return o}async function a(e){const t=await l(e);if(t&&"email"in t.authDetails)return t.authDetails.email}async function c(e){const t=await l(e);if(t&&"phoneNumber"in t.authDetails)return t.authDetails.phoneNumber}async function s(e){return(await i(e.client)).preAuthenticate(e)}}}]);
//# sourceMappingURL=98379.b4023463.chunk.js.map